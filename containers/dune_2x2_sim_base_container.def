BootStrap: docker
From: almalinux:9

%post
    # Install Repos
    dnf makecache --refresh
    dnf groupinstall -y "Development Tools"
    dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm
    dnf install -y https://dl.fedoraproject.org/pub/epel/epel-next-release-latest-9.noarch.rpm
    dnf install -y --nogpgcheck https://mirrors.rpmfusion.org/free/el/rpmfusion-free-release-$(rpm -E %rhel).noarch.rpm
    dnf install -y https://mirrors.rpmfusion.org/nonfree/el/rpmfusion-nonfree-release-$(rpm -E %rhel).noarch.rpm
    dnf config-manager --set-enabled rpmfusion-free-updates-testing
    dnf config-manager --set-enabled rpmfusion-nonfree-updates-testing

    # Install CUDA
    dnf install -y akmod-nvidia
    dnf install -y xorg-x11-drv-nvidia-cuda
